@(eiEventsForm: Form[EiEventForm], eiEvent: EiEventForm, programs: Map[String, String])

@import helper._

@implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapInput.render) } 

@main(Html("Create an Event"), "") {
	@form(routes.Events.newEvent(), 'class -> "form-inline") {
		
		@if(flash.size() > 0){
	        <div class="alert-message error">
	        	@for((key, value) <- flash){
	            	<strong>Error : </strong> @value<br />
	            }
	        </div> 
	    }
	
        <fieldset>
		    <!-- will eventually generate this ID -->
		    <h3>Event Descriptor</h3>    
				@inputText(eiEventsForm("eventID"), '_label -> "Event ID")
				@inputText(eiEventsForm("priority"), '_label -> "Priority")
				@select(
                eiEventsForm("status"), 
                options(eiEvent.statusTypes), 
	                '_label -> "Status", '_default -> "-- Choose a status type --",
	                '_showConstraints -> false
	            )
			
			<h3>Active Period</h3>
			@if(flash.containsKey("")){
				<div class ="clearfix error">
				@inputText(field = eiEventsForm("startDate"), args = '_label -> "Start Date", 'id ->"dp1")
				@inputText(field = eiEventsForm("startTime"), args = '_label -> "Start Time", 'id ->"tp1")
				@inputText(field = eiEventsForm("endDate"), args = '_label -> "End Date", 'id ->"dp2")		
				@inputText(field = eiEventsForm("endTime"), args = '_label -> "End Time", 'id ->"tp2")
				</div>
			}
			@if(!flash.containsKey("")){			
				@inputText(field = eiEventsForm("startDate"), args = '_label -> "Start Date", 'id ->"dp1")
				@inputText(field = eiEventsForm("startTime"), args = '_label -> "Start Time", 'id ->"tp1")
				@inputText(field = eiEventsForm("endDate"), args = '_label -> "End Date", 'id ->"dp2")		
				@inputText(field = eiEventsForm("endTime"), args = '_label -> "End Time", 'id ->"tp2")
			}
				
			
			<h3>Event Signal</h3>
				@inputText(eiEventsForm("signalID"), '_label -> "Signal ID")
				
			<h3>Market Context</h3>
			@select(
                eiEventsForm("marketContext"), 
                options(programs), 
	                '_label -> "Program", '_default -> "-- Choose a program --",
	                '_showConstraints -> false
	            )
		</fieldset>
		
        <div class="actions">
            <input type="submit" value="Create this event" class="btn primary"> or 
            <a href="@routes.Events.events()" class="btn">Cancel</a>     
        </div>
        <script>
			$(function(){
				$('#dp1').datepicker({
					format: 'mm-dd-yyyy'
				});
				$('#dp2').datepicker({
					format: 'mm-dd-yyyy'
				});
				$('#tp1').timepicker();
				$('#tp2').timepicker();
			});
		</script>
	}
}