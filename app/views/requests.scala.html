@(program: String, programs: List[EiEvent])

@import helper._

@import helper.twitterBootstrap._
@main(Html("OadrEvents"), "OadrEvents") {

	<h3>Select Event:</h3>
	<select name="program"">
		@for(p <- programs){
			@if(program == p.getEventDescriptor().getEventID()){
				<option selected="selected" value="@routes.OadrEvents.requests(p.getEventDescriptor().getEventID())">@p.getEventDescriptor().getEventID()</option>
			}else{
				<option value="@routes.OadrEvents.requests(p.getEventDescriptor().getEventID())">@p.getEventDescriptor().getEventID()</option>		
			}
		}
	</select>
	<!-- 
	<br>
	<br>
	<a href=@routes.OadrEvents.sendXMPPRequest(program) class="btn")>XMPP Request</a>
	<a href=@routes.OadrEvents.sendXMPPCreated(program) class="btn")>XMPP Created</a>
	<br>
	<br>
	-->
	<h3>VEN Status</h3>	
	<div id=xmlOutput></div>	

	<script>
		/*
		dropdownRedirect('program');
		
		ajaxTableChange('@routes.OadrEvents.renderAjaxTable(program)');
		*/
	
		$("select[name='program']").change(function(){
			location.href= $(this).val();
		});
	
		$(document).ready(function(){	
			var loadOadrEvents = function(){
				$.post('@routes.OadrEvents.renderAjaxTable(program)',
						"",
						function(data){
							$('#xmlOutput').empty();
							$('<div class="refreshing"><img src=@routes.Assets.at("/images/loader.gif")></div>').appendTo('#xmlOutput');
							$('#xmlOutput').append(data);
							$(".refreshing").remove();
				});
			};
				loadOadrEvents();
				$('#requestbutton').click(function(){
					$(this).text("Loading request...");
					loadOadrEvents();
					$(this).text("Refresh");
				});
				setInterval(loadOadrEvents, 30000);
		});	
	
	</script>
}