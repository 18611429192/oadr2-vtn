@(eventsList: List[EiEvent], eventForm: EiEventForm)

@import helper._

@import helper.twitterBootstrap._

@main(Html("Events"), "Events") {

		@if(flash.containsKey("success")) {
		        <div class="alert-message success">
		            <strong>Success: </strong> @flash.get("success")
		        </div>
		} 
		   
        <table class="zebra-striped">
            <thead>
                <tr>
                	<th>Event ID</th>
                	<th>Priority</th>
                	<th>Status</th>
                	<th>Start Time</th>
                	<th>Duration</th>
                	<th>Signal ID</th>
                	<th>Program</th>
                </tr>
            </thead>
            <tfoot>
            </tfoot>
            <tbody>            	
				@for(event <- eventsList){
					<tr>
						<td><a href="@routes.OadrEvents.requests(event.getEventDescriptor().getEventID())">@event.getEventDescriptor().getEventID()</a></td>
						<td>@event.getEventDescriptor().getPriority()</td>
						<td>@event.getEventDescriptor().getEventStatus()</td>
						<td>@eventForm.displayReadableStart(event.getEiActivePeriod().getProperties().getDtstart().getDateTime().toString())</td>
						<td>@eventForm.displayReadableDuration(event.getEiActivePeriod().getProperties().getDuration().getDuration())</td>
						<!-- <td>@event.getEiEventSignals().getEiEventSignal().get(0).getSignalID()</td> -->					
						<td>@event.getEventDescriptor().getEiMarketContext().getMarketContext()</td>							
						<td>
							@form(routes.Events.editEvent(event.getHjid())){
								<input type="submit" value="Edit" class="btn primary">
							}
						</td>
						<td>
							@form(routes.Events.deleteEvent(event.getHjid())){
								<input type="submit" value="Delete" class="btn danger" onClick="return confirmSubmit()">
							}
						</td>						
					</tr>
				}            	
            </tbody>
        </table>
        
        <script>
        	function confirmSubmit(){
        		var agree=confirm("Are you sure you wish to delete this event?");
        		if(agree)
        			return true;
        		else
        			return false;
        	}
        </script>
}